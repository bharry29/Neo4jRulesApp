Input Parameters:["prodname","storeName","newRating"]
Event:{MATCH (r:Retailer)
MATCH (p:Product)-[sb:SoldBy]->(r) WHERE p.name = prodname and r.name = storeName SET r.Rating = newRating}
Condition:{WITH r,newRating MATCH (c:Customer) WITH r,c,newRating MATCH (r2:Retailer) WITH r2,newRating OPTIONAL MATCH (c)-[gt:GoesTo]->(r) WHERE r.Rating = newRating}
Action:{DELETE gt}